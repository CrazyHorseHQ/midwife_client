#Introduction

This page serves as the API doc for the SMART API. In it, we've tried to describe all of the requests and resources that the API will serve. We've purposely steered clear of describing each and every field in each and every call—such API docs rapidly grow in our experience—and instead are using examples for each request and response as a way to document the API. The fields are pretty self-explanatory but where necessary we provide a description.

As with anything, this is far from perfect or 100% accurate, so if you spot an inaccuracy or have a question about any of the content, please let us know at [The Product Works](http://www.theproduct.works/about-us/)

#Navigate the doc

- [Authentication](#authentication)
	- [/login](#post-login)
	- [/logout](#post-logout)
- [User Account Management](#user-account-management)
    - [/reset_passwords](#post-reset_passwords)
	- [/reset_passwords/:TOKEN](#put-reset_passwordstoken)
	
- [Babies](#baby-resources)
    - [GET /babies](#getbabies]
	- [POST /babies](#postbabies)
	- [PUT /babies/:ID](#putbabiesid)

#Authentication

All requests to the SMART API must be within the bounds of an authenticated user session. The Client must make the necessary request for a secret token; this must then be sent in every subsequent API requests as a header, ``Auth-Token``.

In order to create and destroy a session, the following calls are supported:

  1. `login`: returns a unique ``Auth-Token`; this must be use in all subsequent API requests to the server. [See `login`](#post-login).
  2. `logout`: destroys the user session and effectively disables the Auth-Token from further use. [See `logout`](#post-logout)

**NOTE** 

If the ```Auth-Token``` becomes invalid or expired for any reason, such as a ```service_provider``` becoming inactive, then the API will return a 401 response to any authenticated request. At that point any client should destroy any stored data on the device and show the login screen.
----------
##POST /login

####Notes
* Allows that a SMART client to login to SMART backend with username and password. 
* Returns the ID of the client user and a unique auth token to be used in all subsequent API calls.

####Input
* ``username`` and ``password``: account details of the Service Provider account set-up for these client connections
* json as Content-Type'

####Output
* Login session token
* Internal ID of the Service Provider account

####Example:

```bash
  $ curl -X POST http://54.72.7.91:8888/login \
    -d '{"login":{"username":"conor_wogan","password":"myPassword123"}}' \
    -H "Content-Type: application/json"

  {
    "login": {
      "token": "S3cr3tT0k3n",
      "id": 234
    }
  }
```
----------
##POST /logout

####Notes
* Ends the user login session

####Input
* Session token that was generated by the [/login](#post-login) request as ``Auth-Token`` 

####Output
* Nothing much

####Example:

```bash
  $ curl -X POST http://54.72.7.91:8888/logout \
    -H "Auth-Token: S3cr3tT0k3n"

  {
    "login": {
      "token": null
    }
  }
```
----------

# Authorization
=============

The SMART API will only talk to clients that it knows - strangers aren't welcome! This is achieved by using an [``Api-Key``](https://github.com/TheProductWorks/smart_app#api-key) ("api_key"). A unique api_key is manually generated for a legitimate client and stored securely in an API_key directory in the SMART server backend. Then, when that client makes a request to the API with the api_key, the SMART server will lookup the api_key in its internal directory. If it's valid, then the API will respond nicely; if it's not, then it's 401 all the way!

To request an api_key, take a read [here](https://github.com/TheProductWorks/smart_app#api-key).

Note: if you have SMART installed locally, you need to insert a unique string as key into the ```api_key``` table, then use that key in subsequent API requests.

__IMPORTANT: the ```Api-Key``` must be included in each API request (other than [/login](#post-login) and [/logout](#post-logout)) and it must match the key stored in the SMART backend.__

#User Account Management


## POST /reset_passwords

####Notes
* Request user details of the Service Provider account that needs to be reset

####Input
* email address and username of the Service Provider account to be reset
* Trusty old Api-Key

####Output
* Internal user ID of the user account that is being reset

####Example:

```
$ curl -X POST 54.72.7.91:8888/reset_passwords \
  -d "{"email":"sp@sp.com","username":"sp"}" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e"

{
  "reset_password": {
    "id": 123,
    "service_user_id": 125
  }
}
```

----------

## PUT /reset_passwords/:TOKEN

####Notes

* Reset the password for a specified Service Provider

####Input

* Passwords old and new

###Output

* Service User's internal ID as confirmation

####Example:

```
$ curl -X PUT 54.72.7.91:8888/reset_passwords/S3cr3tT0k3nT0k3n \
  -d "{"password":"newPwd1234","password_verification":"newPwd1234"}" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e"

{
  "reset_password": {
    "id": 123,
    "service_user_id": 125
  }
}
```
----------

#Appointments

Actions available to act on the Appointments resource. Deals with everything that has to do with appointments through a completely [CRUD](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete) interface.

## GET /appointments

####Notes

* List all appointments. 
* Can be filtered using query string params on date and clinic_id(s).

####Inputs

* Nothing much... just don't forget the Api-Key or Auth-Token

####Output

* Big list of appointments and the data for each

####Example:

```
$ curl -X GET 54.72.7.91:8888/appointments -d '{}' \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e"

{
    "appointments": [
        {
            "id": "1",
            "date": "2014-12-12",
            "time": "12:12:00",
            "service_provider_id": "125",
            "service_user_id": "345",
            "priority": "other",
            "visit_type": "post-natal",
            "service_option_ids": []
        },
        { ... }
    ]
}
```

----------

## POST /appointments

####Notes

* Create a new appointment with date, time, priority, visit_type, clinic_id and service_user_id

####Inputs

* 'date' of the appointment
* 'time' of the appointment
* 'priority' of the appointment. One of: 'drop-in', 'scheduled'.
* 'visit_type' says if it's "post-natal" or "ante-natal"
* 'service_provider_id' is the internal ID of the Service Provider trying to book this appointment
* 'service_user_id' is the internal ID of the client for whom the appointment is for
* 'clinic_id' is the internal ID of the clinics that are geographically spread across Dublin & [Wicklow](https://www.google.ie/search?q=beautiful+wicklow&es_sm=122&source=lnms&tbm=isch&sa=X&ei=R9nAVK7HDIq2UfeJg_AG&ved=0CAgQ_AUoAQ&biw=1366&bih=643#tbm=isch&q=beautiful+enniskerry&imgdii=_).

####Example:
```
$ curl -X POST 54.72.7.91:8888/appointments \
  -d '{"date":"2014-12-12","time":"13:00:00","priority":"scheduled","visit_type":"post-natal","service_provider_id":125,"service_user_id":345,"clinic_id":1}'\
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Content-Type: application/json" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e" \
  -b /tmp/cookies.txt

{
    "appointments": {
        "date": "2014-12-12",
        "id": "1",
        "service_provider_id": "125",
        "service_user_id": "345",
        "priority": "scheduled",
        "time": "13:00:00",
        "visit_type": "post-natal",
        "clinic_id": 1
    }
}
```

----------

## GET /appointments/:APPOINTMENT_ID

####Notes
Show details of appointment looked up by `Appointment ID`

####Input
####Output

####Example

```
$ curl -X GET 54.72.7.91:8888/appointments/1  -d '{}' \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e"

{
    "appointments": {
        "date": "2014-12-12",
        "id": "1",
        "service_provider_id": "125",
        "service_user_id": "345",
        "priority": "other",
        "time": "12:12:00",
        "visit_type": "post-natal",
        "service_option_ids": [1],
        "links": {
          "service_options": "/appointments/1/service_options"
        }
    },
}
```

---------

## PUT /appointments/:APPOINTMENT_ID

####Notes
 * Update details of appointment looked up by `ID`

####Input
####Output

####Example:
```
$ curl -X PUT 54.72.7.91:8888/appointments/1 \
  -d '{"date":"2014-12-12","time":"13:00:00","service_provider_id":1}'\
  -H "Content-Type: application/json"\
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e" \
  -b /tmp/cookies.txt

{
    "appointments": {
        "date": "2014-12-20",
        "id": "1",
        "service_provider_id": "2",
        "service_user_id": "345",
        "priority": "other",
        "time": "13:00:00",
        "visit_type": "post-natal"
    }
}
```

----------

## DELETE /appointments/:APPOINTMENT_ID

####Notes
* Delete appointment looked up by `ID` if no notes have been taken related to it.

####Input
####Output 

####Example

```
$ curl -X DELETE 54.72.7.91:8888/appointments/1 \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e"

{
    "appointments": {
        "date": "2014-12-20",
        "id": "1",
        "service_provider_id": "2",
        "service_user_id": "345",
        "priority": "other",
        "time": "13:00:00",
        "visit_type": "post-natal"
    }
}
```
----------

#ServiceOptions Resource

ServiceOptions to be applied to Clinics and Appointments. ServiceOptions are the terminology we came up with to create a loose relationship between the entities listed above. Creating service options are locked down Admin users only.

## GET /service_options

####Notes
* Get all the service_options that are in the system

####Input
####Output 

####Example
```bash
$ curl -X GET 54.72.7.91:8888/service_options  -d '{}' \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e" \
  -H 'Content-Type: application/json'

{
  "service_options": [
    {
      "id": 1,
      "name": "Dublin"
    },
    ...
  ]
}
```
----------

## GET /service_options/:ID

####Notes
* Get a specific service_option


####Input
####Output 

####Example
```bash
$ curl -X GET 54.72.7.91:8888/service_options/1  -d '{}' \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e" \
  -H 'Content-Type: application/json'

{
  "service_options": {
    "id": 1,
    "name": "Dublin"
  }
}
```
---------

Appointment ServiceOptions Resource
=========================

Nested endpoint to list, apply or remove service options from Appointments.

## GET /appointments/:ID/service_options

####Notes
* Return all service_options associated with the appointment


####Input
####Output 

####Example
```bash
$ curl -X get 54.72.7.91:8888/appointments/1/service_options  -d '{}' \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e"

{
    "service_options": [
        {
            "id": 1,
            "name": "new_service_option"
        },
        ...
    ]
}
```
----------

## POST /appointments/:ID/service_options

####Notes
* Add new service_option to the appointment


####Input
####Output 

####Example
```bash
$ curl -X POST 54.72.7.91:8888/appointments/1/service_options \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e" \
  -d '{"service_option": {"id":1}}' -H 'Content-Type: application/json'

{
    "service_options": {
        "id": 1,
        "name": "new_service_option"
    }
}
```
----------
## DELETE /appointments/:ID/service_options/:ID

####Notes
* Remove service_option from appointment


####Input
####Output 

####Example
```bash
$ curl -X DELETE 54.72.7.91:8888/appointments/1/service_options/1 \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e" \
  -H 'Content-Type: application/json'

{
    "service_options": {
        "id": 1,
        "name": "new_service_option"
    }
}
```
----------

#Clinic Resource

CRUD API to deal with Clinics.

## GET /clinics

####Notes
Get all the clinics that are in the system


####Input
####Output 

####Example
```bash
$ curl -X GET 54.72.7.91:8888/clinics  -d '{}' \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e" \
  -H 'Content-Type: application/json'

{
  "clinics": [
    {
      "id": 1,
      "name": "Dun Laoghaire",
      "address": "George's Street",
      "opening_time": "9:00",
      "closing_time": "17:00",
      "recurrence": "weekly",
      "type": "booking",
      "appointment_interval": 15,
      "days": {
        "monday": true,
        "tuesday": false,
        "wednesday": true,
        "thursday": false,
        "friday": false,
        "saturday": false,
        "sunday": false
      },
      "service_option_ids": []
    },
    ...
  ]
}
```
------------

### Query string params

# service_option_id

Filter clinics results based on service_option_id

## GET /clinics/:ID
####Notes

Get a specific clinic

####Input
####Output 

####Example
```bash
$ curl -X GET 54.72.7.91:8888/clinics/1  -d '{}' \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e" \
  -H 'Content-Type: application/json'

{
  "clinics": {
    "id": 1,
    "name": "Dun Laoghaire",
    "address": "George's Street",
    "opening_time": "9:00",
    "closing_time": "17:00",
    "recurrence": "weekly",
    "type": "booking",
    "appointment_interval": 15,
    "days": {
      "monday": true,
      "tuesday": false,
      "wednesday": true,
      "thursday": false,
      "friday": false,
      "saturday": false,
      "sunday": false
    },
    "service_option_ids": []
  }
}
```
----------

## PUT /clinics/:ID

####Notes
* Update a specific clinic


####Input
####Output 

####Example
```bash
$ curl -X GET 54.72.7.91:8888/clinics/1 \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e" \
  -H 'Content-Type: application/json' \
  -d '{"clinic": {"name": "New Clinic", "address": "George's Street"}}'

{
  "clinics": {
    "id": 1,
    "name": "New Clinic",
    "address": "George's Street",
    "opening_time": "9:00",
    "closing_time": "17:00",
    "recurrence": "weekly",
    "type": "booking",
    "appointment_interval": 15,
    "days": {
      "monday": true,
      "tuesday": false,
      "wednesday": true,
      "thursday": false,
      "friday": false,
      "saturday": false,
      "sunday": false
    },
    "service_option_ids": []
  }
}
```
-------------

## DELETE /clinics/:ID

#####Notes
* Delete a specific clinic


####Input
####Output 

####Example

```bash
$ curl -X GET 54.72.7.91:8888/clinics/1 \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e" \
  -H 'Content-Type: application/json'

{
  "clinics": {
    "id": 1,
    "name": "New Clinic",
    "address": "George's Street",
    "opening_time": "9:00",
    "closing_time": "17:00",
    "recurrence": "weekly",
    "type": "booking",
    "appointment_interval": 15,
    "days": {
      "monday": true,
      "tuesday": false,
      "wednesday": true,
      "thursday": false,
      "friday": false,
      "saturday": false,
      "sunday": false
    },
    "service_option_ids": [1,2]
  }
}
```
----------

## POST /clinics

####Notes
* Create new clinic


####Input
####Output 

####Example

```bash
$ curl -X POST 54.72.7.91:8888/clinics \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e" \
  -H 'Content-Type: application/json' \
  -d '{"clinic": {"name": "New Clinic", "address": "George's Street"}}'

{
  "clinics": {
    "id": 14,
    "name": "New Clinic",
    "address": "George's Street",
    "recurrence": "weekly",
    "type": "booking",
    "appointment_interval": 15,
    "days": {
      "monday": false,
      "tuesday": false,
      "wednesday": false,
      "thursday": false,
      "friday": false,
      "saturday": false,
      "sunday": false
    }
  }
}
```
-----------

#Clinic Announcements Resource

These announcements/notes are in place to notify the midwives on rota in case there's a shortage of X in the clinics, or for some reason only take emergency bookings for a specific day for a clinic.

## GET /clinics/:ID/announcements

####Notes
* Get all announcements for a clinic


####Input
####Output 

####Example
```bash
$ curl -X GET 54.72.7.91:8888/clinics/1/announcements  -d '{}' \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e" \
  -H 'Content-Type: application/json'

{
  "announcements": [
    {
      "id": 1,
      "note": "No bookings please on Monday",
      "date": "2014-08-11",
      "blocking": true
    },
    ...
  ]
}
```
----------

## GET /clinics/:ID/announcements/:ID

####Notes
* Get specific announcements for a clinic


####Input
####Output 

####Example
```bash
$ curl -X GET 54.72.7.91:8888/clinics/1/announcements/2  -d '{}' \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e" \
  -H 'Content-Type: application/json'

{
  "announcements": {
    "id": 2,
    "note": "Need more things",
    "date": "2014-08-11",
    "blocking": false
  }
}
```
----------

## POST /clinics/:ID/announcements

#Notes
* Create announcements for a clinic


####Input
####Output 

####Example
```bash
$ curl -X POST 54.72.7.91:8888/clinics/1/announcements \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H 'Content-Type: application/json' \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e" \
  -d '{"note": "No bookings please on Monday","date": "2014-08-11","blocking": true}'

{
  "announcements": [
    {
      "id": 1,
      "note": "No bookings please on Monday",
      "date": "2014-08-11",
      "blocking": true
    },
    ...
  ]
}
```
-----------

## DELETE /clinics/:ID/announcements/:ID

####Notes
* Delete specific announcements for a clinic


####Input
####Output 

####Example
```bash
$ curl -X DELETE 54.72.7.91:8888/clinics/1/announcements/2 \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e" \
  -H 'Content-Type: application/json'

{
  "announcements": {
    "id": 2,
    "note": "Need more things",
    "date": "2014-08-11",
    "blocking": false
  }
}
```
---------

#Service Users Resource

## GET /service_users

####Notes
* List all service_users


####Input
####Output 

####Example
```
$ curl -X GET 54.72.7.91:8888/service_users  -d '{}' \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e"

{
  "service_users": [
    {
      "clinical_fields": {
        "blood_type": "A+",
        "estimated_delivery_date": "2015-03-03"
      },
      "id": 1,
      "hospital_number": "H2345245",
      "personal_fields": {
        "home_address": "Scapemanus\nNavan\nCo Meath",
        "home_type": "apartment",
        "home_county": "Dublin",
        "home_post_code": "D2",
        "directions": "Turn left at the thing",
        "dob": "1988-04-03",
        "email": "smyth@gmail.com",
        "home_phone": "0852351234",
        "mobile_phone": "0852351234",
        "name": "John Smyth",
        "next_of_kin_phone": "0852351234",
        "next_of_kin_name": "John Smith"
      }
    }
  ],
  "pregnancies": [...],
  "babies": [...],
}
```
-----------

### Query string params

#### name

Partial case insensitive search for Service User name.

#### dob

Exact match lookup for Service User date of birth.

#### hospital_number

Hospital number lookup.

----------
## GET /service_users/:ID

####Notes
* Show details of service_user looked up by `ID`


####Input
####Output 

####Example

```
$ curl -X GET 54.72.7.91:8888/service_users/1  -d '{}' \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e"

{
  "service_users": [
    {
      "clinical_fields": {
        "blood_type": "A+",
        "estimated_delivery_date": "2015-03-03"
      },
      "id": 1,
      "hospital_number": "H2345245",
      "personal_fields": {
        "home_address": "Scapemanus\nNavan\nCo Meath",
        "home_type": "apartment",
        "home_county": "Dublin",
        "home_post_code": "D2",
        "directions": "Turn left at the thing",
        "dob": "1988-04-03",
        "email": "smyth@gmail.com",
        "home_phone": "0852351234",
        "mobile_phone": "0852351234",
        "name": "John Smyth",
        "next_of_kin_phone": "0852351234",
        "next_of_kin_name": "John Smith"
      }
    }
  ],
  "pregnancies": [ ... ],
  "babies": [ ... ],
}
```

-----------

## POST /service_users

####Notes
* Create a new Service User

####Input
####Output 

####Example
```
$ curl -X POST 54.72.7.91:8888/service_users \
  -d '{"service_user":{"hospital_number":"H2345245", "clinical_fields":{"blood_type":"A+","estimated_delivery_date":"2015-03-03"},"personal_fields":{"home_address":"Scapemanus\nNavan\nCo Meath", "home_post_code": "D2", "home_type": "apartment", "home_county": "Dublin","directions": "Turn left at the thing","dob": "1988-04-03","email":"smyth@gmail.com","home_phone":"0852351234","mobile_phone": "0852351234","name": "John Smyth","next_of_kin_phone": "0852351234", "next_of_kin_name": "John Smith"}}}'\
  -H "Content-Type: application/json" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e" \
  -H "Auth-Token: S3cr3tT0k3n" \

{
  "service_user": {
    "clinical_fields": {
      "blood_type": "A+",
      "estimated_delivery_date": "2015-03-03"
    },
    "id": 1,
    "hospital_number": "H2345245",
    "personal_fields": {
      "home_address": "Scapemanus\nNavan\nCo Meath",
      "home_type": "apartment",
      "home_county": "Dublin",
      "home_post_code": "D2",
      "directions": "Turn left at the thing",
      "dob": "1988-04-03",
      "email": "smyth@gmail.com",
      "home_phone": "0852351234",
      "mobile_phone": "0852351234",
      "name": "John Smyth",
      "next_of_kin_phone": "0852351234",
      "next_of_kin_name": "John Smith"
    }
  }
}
```
----------

## PUT /service_users/:ID

####Notes
* Update details of Service User looked up by `ID`


####Input
####Output 

####Example
```
$ curl -X PUT 54.72.7.91:8888/service_users/1 \
  -d '{"service_user":{"hospital_number":"H2345245", "clinical_fields":{"blood_type":"A+","estimated_delivery_date":"2015-03-03"},"personal_fields":{"home_address":"Scapemanus\nNavan\nCo Meath","directions": "Turn left at the thing","dob": "1988-04-03","email":"smyth@gmail.com","home_phone":"0852351234","mobile_phone": "0852351234","name": "John Smyth","next_of_kin_phone": "0852351234", "next_of_kin_name": "John Smith"}}}'\
  -H "Content-Type: application/json" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e" \
  -H "Auth-Token: S3cr3tT0k3n" \

{
  "service_user": {
    "clinical_fields": {
      "blood_type": "A+",
      "estimated_delivery_date": "2015-03-03"
    },
    "id": 1,
    "hospital_number": "H2345245",
    "personal_fields": {
      "home_address": "Scapemanus\nNavan\nCo Meath",
      "home_type": "apartment",
      "home_county": "Dublin",
      "home_post_code": "D2",
      "directions": "Turn left at the thing",
      "dob": "1988-04-03",
      "email": "smyth@gmail.com",
      "home_phone": "0852351234",
      "mobile_phone": "0852351234",
      "name": "John Smyth",
      "partner_phone": "0852351234"
    }
  }
}
```

#Service Providers Resource

CRUD interface for Service Providers. The API is locked down for Admin users only.

## GET /service_providers

####Notes
* List all service_providers


####Input
####Output 

####Example
```
$ curl -X GET 54.72.7.91:8888/service_providers  -d '{}' \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e"

{
  "service_providers": [
    {
      "id": 1,
      "name": "Mary Murray",
      "username": "Mary M",
      "email": "caprisun@nmh.ie",
      "password": "*********",
      "active": true,
      "admin": true,
      "job_occupation": "Community Midwife",
      "job_level": "Resident",
      "primary_phone": "0865656777",
      "secondary_phone": "0865656777"
    },
    ...
  ]
}
```

## GET /service_providers/:ID

####Notes
* Show details of service_providers looked up by `ID`


####Input
####Output 

####Example
```
$ curl -X GET 54.72.7.91:8888/service_providers/1  -d '{}' \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e"

{
  "service_provider": {
    "id": 1,
    "name": "Mary Murray",
    "username": "Mary M",
    "email": "caprisun@nmh.ie",
    "password": "*********",
    "active": true,
    "admin": true,
    "job_occupation": "Community Midwife",
    "job_level": "Resident",
    "primary_phone": "0865656777",
    "secondary_phone": "0865656777"
  }
}
```
-----------

## POST /service_providers

####Notes
* Create a new Service Provider

####Input
####Output 

####Example
```
$ curl -X POST 54.72.7.91:8888/service_providers \
  -d '{"service_provider": {"id": 1, "name": "Mary Murray", "username": "Mary M", "email": "caprisun@nmh.ie", "password": "*********", "active": true, "admin": true, "job_occupation": "Community Midwife", "job_level": "Resident", "primary_phone": "0865656777", "secondary_phone": "0865656777"}}'\
  -H "Content-Type: application/json" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e" \
  -H "Auth-Token: S3cr3tT0k3n" \

{
  "service_provider": {
    "id": 1,
    "name": "Mary Murray",
    "username": "Mary M",
    "email": "caprisun@nmh.ie",
    "password": "*********",
    "active": true,
    "admin": true,
    "job_occupation": "Community Midwife",
    "job_level": "Resident",
    "primary_phone": "0865656777",
    "secondary_phone": "0865656777"
  }
}
```
-----------

## PUT /service_providers/:ID

####Notes
* Update details of service_providers looked up by `ID`


####Input
####Output 

####Example
```
$ curl -X PUT 54.72.7.91:8888/service_providers/1 \
  -d '{"service_provider": {"id": 1, "name": "Mary Murray", "username": "Mary M", "email": "caprisun@nmh.ie", "password": "*********", "active": true, "admin": true, "job_occupation": "Community Midwife", "job_level": "Resident", "primary_phone": "0865656777", "secondary_phone": "0865656777"}}'\
  -H "Content-Type: application/json" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e" \
  -H "Auth-Token: S3cr3tT0k3n" \

{
  "service_provider": {
    "id": 1,
    "name": "Mary Murray",
    "username": "Mary M",
    "email": "caprisun@nmh.ie",
    "password": "*********",
    "active": true,
    "admin": true,
    "job_occupation": "Community Midwife",
    "job_level": "Resident",
    "primary_phone": "0865656777",
    "secondary_phone": "0865656777"
  }
}
```
[Top of page ↑](#introduction)

-----------

#Pregnancies Resources

The following API calls detail the requests necessary to get data about pregnancies.
The API supports the creation, querying and updating of these records

## GET /pregnancies

#####Notes
* List all pregnancies

####Input
* Nothing really (just don't forget that token!)

####Output 
Big list of pregnancy records.

####Example
```bash
$ curl -X GET 54.72.7.91:8888/pregnancies  -d '{}' \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e"

{
  "pregnancies": [
    {
      "id": 1,
      "service_user_id": 1,
      "estimated_delivery_date": "2014-07-23",
      "additional_info": "N/A",
      "birth_mode": ["Forceps", "Svd"],
      "perineum": "",
      "anti_d": "",
      "feeding": "",
      "last_menstrual_period": "",
      "gestation": "23 + 4"
    }
  ]
}
```
[Top of page ↑](#introduction)

-----------

## GET /pregnancies/:ID

#####Notes
* Get data for a specific pregnancy

####Input
* Internal ID of the pregnancy

####Output 
* All the details about the pregnancy. See a [full list of pregnancy fields here](https://github.com/TheProductWorks/smart_client/blob/master/doc/DataFields#pregnancy-fields)

####Example
```bash
$ curl -X GET 54.72.7.91:8888/pregnancies/54 -d '{}' \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e"

{
  "pregnancy": {
    "id": 54,
    "service_user_id": 1,
    "estimated_delivery_date": "2014-07-23",
    "additional_info": "N/A",
    "birth_mode": ["Forceps", "Svd"],
    "perineum": "",
    "anti_d": "",
    "feeding": "",
    "last_menstrual_period": "",
    "gestation": "23 + 4"
  }
}
```
[Top of page ↑](#introduction)

-----------

## POST /pregnancies

####Notes
* Create a new pregnancy

####Input
* Any supported details about the pregnancy. See a [full list of pregnancy fields here](https://github.com/TheProductWorks/smart_client/blob/master/doc/DataFields#pregnancy-fields)


####Output 
* All the details about the pregnancy. See a [full list of pregnancy fields here](https://github.com/TheProductWorks/smart_client/blob/master/doc/DataFields#pregnancy-fields)

####Example
```bash
$ curl -X POST 54.72.7.91:8888/pregnancies \
  -d '{"pregnancy": {"service_user_id": 1, "estimated_delivery_date": "2014-07-23", \
     "additional_info": "N/A", "birth_mode": ["Svd"], "perineum": "", "anti_d": "", \
	 "feeding": "", "last_menstrual_period": ""}}'
  -H "Content-Type: application/json" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e" \
  -H "Auth-Token: S3cr3tT0k3n"

{
  "pregnancy": {
    "id": 1,
    "service_user_id": 1,
    "estimated_delivery_date": "2014-07-23",
    "additional_info": "N/A",
    "birth_mode": ["Svd"],
    "perineum": "",
    "anti_d": "",
    "feeding": "",
    "last_menstrual_period": "",
    "gestation": "23 + 4"
  }
}
```
[Top of page ↑](#introduction)
-----------

## PUT /pregnancies/:ID

####Notes
* Updates details about a pregnancy

####Input
####Output 

####Example
```bash
$ curl -X PUT 54.72.7.91:8888/pregnancies \
  -d '{"pregnancy": {"service_user_id": 1, "estimated_delivery_date": "2014-07-23", \
     "additional_info": "N/A", "birth_mode": ["Svd"], "perineum": "", "anti_d": "", \
     "feeding": "", "last_menstrual_period": ""}}'
  -H "Content-Type: application/json" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e" \
  -H "Auth-Token: S3cr3tT0k3n"

{
  "pregnancy": {
    "id": 1,
    "service_user_id": 123,
    "estimated_delivery_date": "2014-07-23",
    "additional_info": "N/A",
    "birth_mode": ["Svd"],
    "perineum": "1 degree without sutures",
    "anti_d": "",
    "feeding": "Breast ",
    "last_menstrual_period": "2014-01-02",
    "gestation": "23 + 4"
  }
}
```
[Top of page ↑](#introduction)

-----------

#Babies Resources

The following API calls give access to baby records and data within SMART.

## GET /babies

####Notes
* Get list of babies in the system


####Input
* Nothing really

####Output 
* List of all baby records and the data fields for each. See full list of [data field for a baby record](https://github.com/TheProductWorks/smart_client/blob/master/doc/DataFields#baby-fields)

####Example
```bash
$ curl -X GET 54.72.7.91:8888/babies  -d '{}' \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e"

{
  "babies": [
    {
      "id": 1,
		"pregnancy_id": 100,
		"hospital_number": "H39999999",
		"gender": "male",
		"weight": 3720,
		"delivery_date_time": "2014-07-24 12:12:12",
		"vitamin_k": "Oral",
		"hearing": "",
		"newborn_screening_test": "Done",
		"birth_outcome": "Liveborn"
  }},
    ...
  ]
}
```
[Top of page ↑](#introduction)

----------

## GET /babies:ID

####Notes
* Get all data for a specified baby

####Input
* The internal ID of the baby record

####Output 
* Spits back out the data fields for that baby record. See full list of [data field for a baby record](https://github.com/TheProductWorks/smart_client/blob/master/doc/api.md#navigate-the-doc)

####Example
```bash
$ curl -X GET 54.72.7.91:8888/babies/333  -d '{}' \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e"

{
  "baby": {
    "id": 333,
    "pregnancy_id": 100,
    "hospital_number": "H39999999",
    "gender": "male",
    "weight": 3720,
    "delivery_date_time": "2014-07-24 12:12:12",
    "vitamin_k": "Oral",
    "hearing": "",
    "newborn_screening_test": "Done",
    "birth_outcome": "Liveborn"
  }
}
```
[Top of page ↑](#introduction)

---------
## POST /babies

####Notes
* Create a new Baby record

####Input
* Any of the support fields for a baby. See full list of [data field for a baby record](https://github.com/TheProductWorks/smart_client/blob/master/doc/api.md#navigate-the-doc)

####Output 
* Spits back out the data fields for that baby record. See full list of [data field for a baby record](https://github.com/TheProductWorks/smart_client/blob/master/doc/api.md#navigate-the-doc)

####Example
```bash
$ curl -X POST 54.72.7.91:8888/babies \
  -d '{"baby": {"pregnancy_id":100, "hospital_number": "H9999999", "gender": "male", \
  "weight": 3720, "delivery_date_time": "2014-07-24 12:12:12", "vitamin_k": "yes", \
 "hearing": "test passed","newborn_screening_test": "passed", "birth_outcome": "Liveborn"}}'
  -H "Content-Type: application/json" \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e"

{
  "baby": {
    "id": 333,
    "pregnancy_id": 100,
    "hospital_number": "H39999999",
    "gender": "male",
    "weight": 3720,
    "delivery_date_time": "2014-07-24 12:12:12",
    "vitamin_k": "Oral",
    "hearing": "",
    "newborn_screening_test": "Done",
    "birth_outcome": "Liveborn"
  }
}
```
[Top of page ↑](#introduction)

-----------

## PUT /babies/:ID

#####Notes
* Ability to update a Baby record with edits made on the UI
* ID is the unique number for that baby record

####Input
* Any of the support fields for a baby. See full list of [data field for a baby record](https://github.com/TheProductWorks/smart_client/blob/master/doc/api.md#navigate-the-doc)

####Output 
* Spits back out the data fields for that baby record. See full list of [data field for a baby record](https://github.com/TheProductWorks/smart_client/blob/master/doc/api.md#navigate-the-doc)

####Example
```bash
$ curl -X PUT 54.72.7.91:8888/babies/1 \
  -d '{"baby": {"pregnancy_id":100, "hospital_number": "H9999999", "gender": "male", \
  "weight": 3720, "delivery_date_time": "2014-07-24 12:12:12", "vitamin_k": "yes", \
  "hearing": "test passed","newborn_screening_test": "passed", "birth_outcome": "Liveborn"}}'
  -H "Content-Type: application/json" \
  -H "Auth-Token: S3cr3tT0k3n" \
  -H "Api-Key: t5sample-1234-9c22-a2a2-ap1k3ysamp1e"

{
  "baby": {
    "id": 333,
    "pregnancy_id": 100,
    "hospital_number": "H39999999",
    "gender": "male",
    "weight": 3720,
    "delivery_date_time": "2014-07-24 12:12:12",
    "vitamin_k": "Oral",
    "hearing": "",
    "newborn_screening_test": "Done",
    "birth_outcome": "Liveborn"
  }
}
```
-----------
[Top of page ↑](#introduction)
